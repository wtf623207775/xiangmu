<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>详情页</title>
    <link rel="stylesheet" href="../css/detail.css">
</head>
<body>
    <script src="../lib/jquery/dist/jquery.min.js"></script>
    <div class="site-topbar">
        <div class="container clear">
            <ul class="topbar-nav clear">
                <li>小米商城</li><span class="sep">|</span>
                <li>MIUI</li><span class="sep">|</span>
                <li>IoT</li><span class="sep">|</span>
                <li>云服务</li><span class=" sep">|</span>
                <li>金融</li><span class="sep">|</span>
                <li>有品</li><span class="sep">|</span>
                <li>小爱开放平台</li><span class="sep">|</span>
                <li>企业团购</li><span class="sep">|</span>
                <li>资质证照</li><span class="sep">|</span>
                <li>协议规则</li><span class="sep">|</span>
                <li>下载app</li>
            </ul>

            <div class="topbar-cart">
                <a class="cart-mini"><span class="glyphicon glyphicon-shopping-cartconfont"></span>购物车
                    <span class="cart-mini-num ">（0）</span>
                </a>
            </div>
            <div class="topbar-info">
                <a class="link">登录</a><span class="sep">|</span><a class="link">注册</a> <span class="sep">|</span><span
                    class="message">
                    <a class="link">消息通知
                        <i lass="J_miMessageTotal"></i></a>
                </span>
            </div>
        </div>
    </div>
    <!-- 头部导航 -->
    <div class="site-header clear">
        <div class="header-container clear">
            <img class="header-pic" src="../images/logo.png" />
            <div class="header-tit clear">
                <span class="header-sp">全部商品分类</span>
            </div>
            <div class="nav-top">
                <ul class="nav-tab" id="tab">

                </ul>
                <div class="nav-search">
                    <input type="search" class="search-ipt" value="智能家电">
                    <input type="text" class="search">
                </div>
            </div>


        </div>
        <!-- 导航选项 -->
        <ul class="show-list">

        </ul>
    </div>    
        <script>
            getList()
            function getList() {
                $.ajax({
                    url: "../lib/nav_top.json",
                    dataType: "json",
                    success: function (res) {

                        let str = ""

                        res.forEach(item => {
                            str += `<li>${item.name}</li>`

                        })

                        $('.show-list').hide()
                        // 添加一个移入移出事件
                        $("#tab").html(str)
                            .on({
                                mouseenter: () => $('.show-list').stop().slideDown(),
                                mouseleave: () => $('.show-list').stop().slideUp()
                            })
                            .children('li').on('mouseover', function () {
                                const index = $(this).index()

                                const list = res[index].list

                                //渲染对应的ul
                                let str = '';
                                list.forEach(item => {
                                    str += ` <li>
                                <img src="${ item.list_url}" alt="">
                                <p class="title">${ item.list_name}</p>
                                <span class="price">${ item.list_price}</span>
                                </li>`
                                })

                                //填充
                                $('.show-list').html(str)
                            })


                        //  给 .show-list 添加一个移入移出事件
                        $('.show-list').on({
                            mouseover: function () { $(this).finish().show() },
                            mouseout: function () { $(this).finish().slideUp() }
                        })
                    }
                })
            }
        </script>
    <div class="wrapper">
        <div class="show clear">
            <div class="show-tv">
                <img src="../images/index/011dd8493ad62f3793dbb63d9fbd3bc0.jpg" alt="">
            </div>          
            <div class="goods-content clear">
                <p>手机</p>
                <p class="price">价格</p>
                <button class="buy">加入购物车</button>
            </div>
        </div>
    </div>
</body>
</html>